---
import Nav from "./nav.astro";
---

<header
  id="header"
  class="celular:pl-[1.2rem] celular:pr-[2.2rem] w-full h-14 px-32 flex justify-between items-center bg-transparent fixed z-50 transition duration-300 ease-in-out"
>
  <a href="/" class="flex items-center">
    <img
      src="../logo_owlyxblack.webp"
      alt="Owlyx Logo"
      class="w-16 celular:w-12"
    />
    <h2 class="ml-3 text-3xl font-bold my-auto celular:text-xl">Owlyx</h2></a
  >
  <Nav />
</header>

<script is:inline defer>
  if (typeof window !== "undefined") {
    function initializeScript() {
      try {
        const element = document.getElementById("header");

        if (!element) {
          console.error("El elemento con ID 'header' no fue encontrado.");
          return;
        }

        window.addEventListener("scroll", () => {
          if (window.scrollY >= 90) {
            element.classList.add("bg-white", "shadow-md");
          } else {
            element.classList.remove("bg-white", "shadow-md");
          }
        });
      } catch (error) {
        console.error("Error al ejecutar el script:", error);
      }
    }

    // Inicializar el script al cargar la pÃ¡gina
    document.addEventListener("DOMContentLoaded", initializeScript);

    // Reiniciar el script cuando se cambie la ruta
    window.addEventListener("popstate", () => {
      // Vuelve a cargar el script cuando se detecta un cambio de ruta
      initializeScript();
    });
  }
</script>
