---
import Nav from "./nav.astro";
---

<header
  id="header"
  class="celular:px-8 w-full h-14 px-32 flex justify-between items-center bg-transparent bg-opacity-50 celular:bg-opacity-100 fixed z-40 transition duration-300 ease-in-out text-white celular:text-negro"
>
  <a href="/" class="flex items-center relative">
    <img
      id="logo"
      src="../logo-owlyx-white.webp"
      alt="Owlyx Logo"
      class="w-16 mr-5"
    />

    <img
      id="isologo"
      src="../owlyx-logo-letra-white.webp"
      alt="Owlyx Logo Letra"
      class="w-36 celular:w-24"
    />
  </a>
  <Nav />
</header>

<script is:inline defer>
  if (typeof window !== "undefined") {
    function initializeScript() {
      try {
        const element = document.getElementById("header");
        const logo = document.getElementById("logo");
        const isologo = document.getElementById("isologo");

        if (!element) {
          console.error("No se encontro un elemento.");
          return;
        }

        window.addEventListener("scroll", () => {
          if (window.scrollY >= 90) {
            isologo.src = "../owlyx-logo-letra-black.webp";
            logo.src = "../logo-owlyx-black.webp";
            element.classList.add("bg-white", "shadow-md");
            element.classList.remove("text-white");
            element.classList.add("text-black");
          } else {
            isologo.src = "../owlyx-logo-letra-white.webp";
            logo.src = "../logo-owlyx-white.webp";
            element.classList.remove("bg-white", "shadow-md");
            element.classList.remove("text-black");
            element.classList.add("text-white");
          }
        });
      } catch (error) {
        console.error("Error al ejecutar el script:", error);
      }
    }

    // Inicializar el script al cargar la pÃ¡gina
    document.addEventListener("DOMContentLoaded", initializeScript);

    // Reiniciar el script cuando se cambie la ruta
    window.addEventListener("popstate", () => {
      // Vuelve a cargar el script cuando se detecta un cambio de ruta
      initializeScript();
    });
  }
</script>
