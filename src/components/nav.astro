---
import NavOption from "./navOption.astro";
import DropDownOption from "./dropDownOption.astro";
import { IconMenu2 } from "@tabler/icons-react";
---

<div class="hidden celular:block">
  <div id="menuIcon" class="cursor-pointer">
    <IconMenu2 stroke={2} />
  </div>
</div>
<div
  id="menu"
  class="celular:translate-x-full celular:duration-300 celular:flex-col celular:items-center celular:w-full celular:h-[200px] celular:justify-around celular:absolute celular:top-[56px] celular:right-0 celular:bg-white w-1/3 flex justify-between items-center"
>
  <!-- Opción de navegación: Inicio -->
  <NavOption label="Inicio" />

  <!-- Menú desplegable para 'Servicios' -->
  <div class="py-4 relative inline-block group">
    <NavOption label="Servicios" />
    <div
      id="dropdownMenu"
      class="hidden absolute top-1 -left-5 bg-white shadow-lg z-10 min-w-48 rounded-md opacity-0 translate-y-2 transition-opacity duration-300 ease-in-out group-hover:block group-hover:opacity-100 group-hover:translate-y-12 group-focus:opacity-100 group-focus:translate-y-12 group-focus:block"
    >
      <!-- Opciones del menú desplegable -->
      <DropDownOption label="Creación de Sitios Web" />
      <DropDownOption label="Diseño de Sitios Web" />
      <DropDownOption label="Branding e Identidad" />
    </div>
  </div>

  <!-- Opción de navegación: Contacto -->
  <NavOption label="Contacto" />
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menuIconDiv = document.getElementById("menuIcon");
    const menuDiv = document.getElementById("menu");

    // Verificar si los elementos existen
    if (!menuIconDiv || !menuDiv) {
      console.error(
        "El elemento con ID 'menuIcon' o 'menu' no fue encontrado."
      );
      return;
    }

    let isMenuOpen = false;

    // Función para alternar el estado del menú
    const toggleMenu = () => {
      isMenuOpen = !isMenuOpen;

      // Cambiar el icono
      menuIconDiv.innerHTML = isMenuOpen
        ? `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>`
        : `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>`;

      // Mostrar u ocultar el menú
      if (isMenuOpen) {
        menuDiv.classList.remove("celular:translate-x-full");
        menuDiv.classList.add("translate-x-0");
      } else {
        menuDiv.classList.remove("translate-x-0");
        menuDiv.classList.add("celular:translate-x-full");
      }
    };

    // Escuchar clic en el ícono del menú
    menuIconDiv.addEventListener("click", toggleMenu);
  });
</script>
